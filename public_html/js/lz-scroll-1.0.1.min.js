(function(c){c.extend({isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]";},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]";
}});var a=function(e){this.$ele=c(e);this.param=this.$ele.data("scroll-param");this.status=this.$ele.data("scroll-status");this.controlY=this.$ele.data("scroll-controlY");
this.controlX=this.$ele.data("scroll-controlX");};a.prototype.setEvent=function(){var e=this,f=this.param;if(c.isArray(f.event)){c.each(f.event,function(g,h){e[h]&&e[h]();
});}else{e[f.event]&&e[f.event]();}};a.prototype.wheel=function(){var f=this.$ele,e=this.status,h=this.param,g=h.speed;f.on("mousewheel DOMMouseScroll",function(l){var k=h.axis==="x"?e.controlW:e.controlH,i=h.axis==="x"?e.moveW:e.moveH,j=h.axis==="x"?e.boxW:e.boxH-e.space;
l.preventDefault();if(e.wheelflag&&k){var m=(l.originalEvent.wheelDelta&&(l.originalEvent.wheelDelta>0?1:-1))||(l.originalEvent.detail&&(l.originalEvent.detail>0?-1:1));
if(m>0){if(i>g){i-=g;}else{i=0;}}else{if(m<0){if(i+k+g<j){i+=g;}else{i=~~(j-k);}}}if(h.axis==="x"){e.moveW=i;f.scrollExcute("x");}else{e.moveH=i;f.scrollExcute("y");
}}});};a.prototype.drag=function(){var g=this.$ele,e=this.status,j=this.param,h=this.controlX,f=this.controlY,i=c(document);interY=0,outerY=0,interX=0,outerX=0;
if(h){h.on("mousedown",function(k){k=k||window.event;k.preventDefault();interX=k.offsetX;e.wheelflag=false;e.mouseX=true;});}if(f){f.on("mousedown",function(k){k=k||window.event;
k.preventDefault();interY=k.offsetY;e.wheelflag=false;e.mouseY=true;});}i.on("mouseup",function(k){if(!e.mouseH&&(e.mouseY||e.mouseX)&&!j.display){!!h&&h.hide();
!!f&&f.hide();}e.mouseY=false;e.mouseX=false;e.wheelflag=true;});g.on("mouseup",function(k){e.mouseY=false;e.mouseX=false;e.wheelflag=true;});i.on("mousemove",function(n){if(e.mouseY){var o=g.offset().top,k=n.clientY;
e.moveH=k-interY-o;if(e.moveH<0){e.moveH=0;}else{if(e.moveH+e.controlH>e.boxH-e.space){e.moveH=e.boxH-e.controlH-e.space;}}g.scrollExcute("y");}if(e.mouseX){var m=g.offset().left,l=n.clientX;
e.moveW=l-interX-m;if(e.moveW<0){e.moveW=0;}else{if(e.moveW+e.controlW>e.boxW-e.space){e.moveW=e.boxW-e.controlW-e.space;}}g.scrollExcute("x");}});};a.prototype.display=function(){var g=this.$ele,e=this.status,h=this.controlX,f=this.controlY;
g.on("mouseover",function(i){!!h&&h.show();!!f&&f.show();}).on("mouseout",function(i){(!!f&&!e.mouseY)&&f.hide();(!!h&&!e.mouseX)&&h.hide();});};a.prototype.change=function(){var i=this.$ele,e=this.status,j=this.controlX,h=this.controlY,f=new MutationObserver(function(){if(j){i.scrollUpdate(["x"]);
j.css("width",e.controlW);i.scrollExcute("x");}if(h){i.scrollUpdate(["y"]);h.css("height",e.controlH);i.scrollExcute("y");}f.disconnect();f.observe(i.get(0),g);
});var g={attributes:true,childList:true,subtree:true};f.observe(i.get(0),g);};var b=function(e){this.$ele=c(e);this.param=this.$ele.data("scroll-param");
this.status=this.$ele.data("scroll-status");};b.prototype.updateY=function(){var k=this.$ele,l=k.data("scroll-controlX"),j=k.data("scroll-controlY"),h=this.status;
if(j){j.css("top",0);}if(l){l.css("bottom",0);}var i=k.prop("scrollHeight");var g=k.height(),f=i<=g?0:g/i*(g-h.space)>6?~~(g/i*(g-h.space)+0.5):6,e=~~(k.scrollTop()*(g-h.space-f)/(i-g)+0.5);
h.contentH=i;h.controlH=f;h.boxH=g;h.moveH=e;};b.prototype.updateX=function(){var h=this.$ele,j=h.data("scroll-controlX"),g=h.data("scroll-controlY"),f=this.status;
if(j){j.css("left",0);}if(g){g.css("right",0);}var e=h.prop("scrollWidth");var l=h.width(),k=e<=l?0:l/e*(l-f.space)>6?~~(l/e*(l-f.space)+0.5):6,i=~~(h.scrollLeft()*(l-f.space-k)/(e-l)+0.5);
f.contentW=e;f.controlW=k;f.boxW=l;f.moveW=i;};b.prototype.doScroll=function(e){this["calculate"+e.toUpperCase()]();};b.prototype.calculateY=function(){var f=this.$ele,e=this.status,h=f.data("scroll-controlY"),g=f.data("scroll-controlX");
if(e.contentH<=e.boxH){h.css("height",0);arr=[0,0];}bDis=~~(e.moveH*(e.contentH-e.boxH)/(e.boxH-e.space-e.controlH)+0.5);sDis=e.moveH+bDis;h.css("top",sDis);
if(g){g.css("bottom",-bDis);}f.scrollTop(bDis);};b.prototype.calculateX=function(){var g=this.$ele,e=this.status,h=g.data("scroll-controlX"),f=g.data("scroll-controlY");
if(e.contentW<=e.boxW){h.css("width",0);arr=[0,0];}bDis=~~(e.moveW*(e.contentW-e.boxW)/(e.boxW-e.space-e.controlW)+0.5);sDis=e.moveW+bDis;h.css("left",sDis);
if(f){f.css("right",-bDis);}g.scrollLeft(bDis);};var d=function(j,g,f,k,i,h){this.$ele=c(j);this.$ele.data("scroll-param",this.initParam(g,f,k,i,h));this.$ele.data("scroll-status",{wheelflag:true,mouseX:false,mouseY:false,mouseH:false,contentH:0,contentW:0,boxH:0,boxW:0,controlH:0,controlW:0,moveH:0,moveW:0,space:0});
this.arr=this.$ele.data("scroll-param").axis.split("");};d.prototype.initEvent=function(){var h=this.$ele,i=h.data("scroll-controlX"),g=h.data("scroll-controlY"),k=h.data("scroll-param"),j=k.display,e=this.arr,f=new a(h);
if(!j){k.event.push("display");!!g&&g.hide();!!i&&i.hide();}c(window).resize(function(l){h.scrollUpdate(e);!!g&&g.css("height",status.controlH);!!i&&i.css("width",status.controlW);
});h.on("mouseover",function(l){status.mouseH=true;}).on("mouseout",function(l){status.mouseH=false;});f.setEvent();};d.prototype.layout=function(){var h=this.$ele,j=h.data("scroll-param"),e=h.data("scroll-status");
if(h.css("position")==="static"){h.css("position","relative");}if(j.axis==="yx"||j.axis==="xy"){e.space=j.width;}var f="lzscroll-"+j.theme;var g=c("<div class='"+f+"-Y'></div>").addClass("scroll-controlY");
var i=c("<div class='"+f+"-X'></div>").addClass("scroll-controlX");if(j.axis==="x"){i.appendTo(h);h.data("scroll-controlX",h.find(".scroll-controlX"));
}else{if(j.axis==="y"){g.appendTo(h);h.data("scroll-controlY",h.find(".scroll-controlY"));}else{g.appendTo(h);i.appendTo(h);h.data("scroll-controlX",h.find(".scroll-controlX"));
h.data("scroll-controlY",h.find(".scroll-controlY"));}}h.scrollUpdate(this.arr);if(h.data("scroll-controlY")){h.data("scroll-controlY").css("height",e.controlH);
}if(h.data("scroll-controlX")){h.data("scroll-controlX").css("width",e.controlW);}};d.prototype.initParam=function(g,f,k,j,h){var i={axis:"y",theme:"default",speed:20,display:true,width:8,event:["wheel","drag","change"]};
if(c.isObject(g)){i=c.extend({},i,g);}else{i.axis=g;i.speed=f;i.width=k;i.display=j;i.theme=h;}!isNaN(g)&&(i.speed=g);typeof g==="boolean"&&(i.display=g);
if(this.$ele.data("scroll-param")){i=c.extend({},i,this.$ele.data("scroll-param"));}i.axis=(i.axis=="x"||i.axis=="y"||i.axis=="xy"||i.axis=="yx")?i.axis:"y";
i.display=(i.display===false)?false:true;isNaN(i.speed)&&(i.speed=20);isNaN(i.width)&&(i.width=10);!i.theme&&(i.theme="default");return i;};c.fn.scrollUpdate=function(e){var f=c(this).get(0);
c.each(e,function(g,h){f.scrollexcute["update"+h.toUpperCase()]();});};c.fn.scrollExcute=function(e){var f=c(this).get(0);f.scrollexcute.doScroll(e);};
c.fn.lzscroll=function(g,f,k,j,i){var h=c(this);c.each(h,function(l,m){var e=new d(m,g,f,k,j,i);m.scrollexcute=new b(m);e.layout();e.initEvent();});return h;
};})(jQuery);